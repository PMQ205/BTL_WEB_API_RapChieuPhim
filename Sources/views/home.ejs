<%- include('partials/head') %>

<%- include('partials/nav') %>

<div id="intro-video">
    <video autoplay playsinline muted id="intro-vid">
        <source src="/videos/cas4.mp4" type="video/mp4">
    </video>
</div>

<!-- HERO SECTION -->
<div class="hero-section">
    <!-- HERO SLIDE -->
    <div class="hero-slide">
        <div class="owl-carousel carousel-nav-center" id="hero-carousel">
            <% 
            // Dữ liệu hero slides - chỉ hiển thị phim có MaPhim từ database
            const heroSlides = (typeof heroFilms !== 'undefined' && Array.isArray(heroFilms) && heroFilms.length > 0)
                ? heroFilms.filter(film => film && film.MaPhim)
                : [];
            if (heroSlides.length > 0) {
                heroSlides.forEach((film, index) => { %>
                    <%- include('partials/hero-slide-item', { film }) %>
                <% });
            } else { %>
                <!-- Nếu không có dữ liệu hero, hiển thị một slide mặc định với message -->
                <div class="hero-slide-item">
                    <img src="/images/black-banner.png" alt="Chưa có phim">
                    <div class="overlay"></div>
                    <div class="hero-slide-item-content">
                        <div class="item-content-wraper">
                            <div class="item-content-title top-down">
                                Chào mừng đến với GAMYW
                            </div>
                            <div class="item-content-description top-down delay-4">
                                Hệ thống đang được cập nhật. Vui lòng quay lại sau.
                            </div>
                        </div>
                    </div>
                </div>
            <% } %>
        </div>
    </div>
    <!-- END HERO SLIDE -->
    
    <!-- TOP MOVIES SLIDE -->
    <div class="top-movies-slide">
        <div class="owl-carousel" id="top-movies-slide">
            <% 
            const topMovies = (typeof topMoviesFilms !== 'undefined' && Array.isArray(topMoviesFilms) && topMoviesFilms.length > 0)
                ? topMoviesFilms.filter(film => film && film.MaPhim) // Chỉ hiển thị phim có MaPhim
                : [];
            topMovies.forEach((film) => { %>
                <%- include('partials/movie-item', { film, isLink: true }) %>
            <% }); %>
        </div>
    </div>
    <!-- END TOP MOVIES SLIDE -->
</div>
<!-- END HERO SECTION -->

<!-- LATEST MOVIES SECTION -->
<div class="section">
    <div class="container">
        <div class="section-header">
            latest movies
        </div>
        <div class="movies-slide carousel-nav-center owl-carousel">
            <% 
            const latestMovies = (typeof moviesFilms !== 'undefined' && Array.isArray(moviesFilms) && moviesFilms.length > 0)
                ? moviesFilms.filter(film => film && film.MaPhim) // Chỉ hiển thị phim có MaPhim
                : [];
            latestMovies.forEach((film) => { %>
                <%- include('partials/movie-item', { film, isLink: true }) %>
            <% }); %>
            <% if (latestMovies.length === 0) { %>
                <p style="text-align: center; color: rgba(255,255,255,0.7); padding: 2rem; grid-column: 1/-1;">
                    Chưa có phim nào trong danh mục này. Vui lòng thêm phim vào database với cột Loai = 'MOVIE'
                </p>
            <% } %>
        </div>
    </div>
</div>
<!-- END LATEST MOVIES SECTION -->

<!-- LATEST SERIES SECTION -->
<div class="section">
    <div class="container">
        <div class="section-header">
            latest series
        </div>
        <div class="movies-slide carousel-nav-center owl-carousel">
            <% 
            const latestSeries = (typeof seriesFilms !== 'undefined' && Array.isArray(seriesFilms) && seriesFilms.length > 0)
                ? seriesFilms.filter(film => film && film.MaPhim) // Chỉ hiển thị phim có MaPhim
                : [];
            latestSeries.forEach((film) => { %>
                <%- include('partials/movie-item', { film, isLink: true }) %>
            <% }); %>
            <% if (latestSeries.length === 0) { %>
                <p style="text-align: center; color: rgba(255,255,255,0.7); padding: 2rem; grid-column: 1/-1;">
                    Chưa có series nào trong danh mục này. Vui lòng thêm phim vào database với cột Loai = 'SERIES'
                </p>
            <% } %>
        </div>
    </div>
</div>
<!-- END LATEST SERIES SECTION -->

<!-- LATEST CARTOONS SECTION -->
<div class="section">
    <div class="container">
        <div class="section-header">
            latest cartoons
        </div>
        <div class="movies-slide carousel-nav-center owl-carousel">
            <% 
            const latestCartoons = (typeof cartoonsFilms !== 'undefined' && Array.isArray(cartoonsFilms) && cartoonsFilms.length > 0)
                ? cartoonsFilms.filter(film => film && film.MaPhim) // Chỉ hiển thị phim có MaPhim
                : [];
            latestCartoons.forEach((film) => { %>
                <%- include('partials/movie-item', { film, isLink: true }) %>
            <% }); %>
            <% if (latestCartoons.length === 0) { %>
                <p style="text-align: center; color: rgba(255,255,255,0.7); padding: 2rem; grid-column: 1/-1;">
                    Chưa có phim hoạt hình nào trong danh mục này. Vui lòng thêm phim vào database với cột Loai = 'CARTOON'
                </p>
            <% } %>
        </div>
    </div>
</div>
<!-- END LATEST CARTOONS SECTION -->

<!-- SPECIAL MOVIE SECTION -->
<div class="section">
    <div class="hero-slide-item">
        <img src="/images/transformer-banner.jpg" alt="Transformers">
        <div class="overlay"></div>
        <div class="hero-slide-item-content">
            <div class="item-content-wraper">
                <div class="item-content-title">
                    Transformers
                </div>
                <div class="movie-infos">
                    <div class="movie-info">
                        <i class="bx bxs-star"></i>
                        <span>9.5</span>
                    </div>
                    <div class="movie-info">
                        <i class="bx bxs-time"></i>
                        <span>120 mins</span>
                    </div>
                    <div class="movie-info">
                        <span>HD</span>
                    </div>
                    <div class="movie-info">
                        <span>16+</span>
                    </div>
                </div>
                <div class="item-content-description">
                    Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas, possimus eius. Deserunt non odit, cum vero reprehenderit laudantium odio vitae autem quam, incidunt molestias ratione mollitia accusantium, facere ab suscipit.
                </div>
                <div class="item-action">
                    <a href="#" class="btn btn-hover">
                        <i class="bx bxs-right-arrow"></i>
                        <span>book now</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END SPECIAL MOVIE SECTION -->

<!-- PRICING SECTION -->
<div class="section">
    <div class="container">
        <div class="pricing">
            <div class="pricing-header">
                GA<span class="main-color">M</span>Y<span class="main-color">W</span> pricing
            </div>
            <div class="pricing-list">
                <div class="row">
                    <% 
                    const pricingPlans = [
                        { 
                            name: 'Basic', 
                            price: 'Free', 
                            period: null, 
                            highlight: false,
                            features: [
                                { text: 'Originals', del: false },
                                { text: 'Swich plans anytime', del: false },
                                { text: '65+ top Live', del: true },
                                { text: 'TV Channels', del: true },
                                { text: '4K Video Quality', del: true }
                            ]
                        },
                        { 
                            name: 'Premium', 
                            price: '$15.99', 
                            period: 'month', 
                            highlight: true,
                            features: [
                                { text: 'Originals', del: false },
                                { text: 'Swich plans anytime', del: false },
                                { text: 'Full HD Video Quality', del: false },
                                { text: '65+ top Live', del: false },
                                { text: 'TV Channels', del: true }
                            ]
                        },
                        { 
                            name: 'VIP', 
                            price: '$35.99', 
                            period: 'month', 
                            highlight: false,
                            features: [
                                { text: 'Originals', del: false },
                                { text: 'Swich plans anytime', del: false },
                                { text: '65+ top Live', del: false },
                                { text: 'TV Channels', del: false },
                                { text: '4K Video Quality', del: false }
                            ]
                        }
                    ];
                    pricingPlans.forEach((plan) => { %>
                        <%- include('partials/pricing-box', { plan }) %>
                    <% }); %>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- END PRICING SECTION -->

<% 
const footerMenus = [
    {
        title: 'GAMYW',
        items: [
            { type: 'link', text: 'About us', href: '#' },
            { type: 'link', text: 'My profile', href: '#' },
            { type: 'link', text: 'Pricing plans', href: '#' },
            { type: 'link', text: 'Contacts', href: '#' }
        ]
    },
    {
        title: 'Browse',
        items: [
            { type: 'link', text: 'About us', href: '#' },
            { type: 'link', text: 'My profile', href: '#' },
            { type: 'link', text: 'Pricing plans', href: '#' },
            { type: 'link', text: 'Contacts', href: '#' }
        ]
    },
    {
        title: 'Help',
        items: [
            { type: 'link', text: 'About us', href: '#' },
            { type: 'link', text: 'My profile', href: '#' },
            { type: 'link', text: 'Pricing plans', href: '#' },
            { type: 'link', text: 'Contacts', href: '#' }
        ]
    },
    {
        title: 'Download app',
        items: [
            { type: 'image', src: '/images/google-play.png', alt: 'Google Play', href: '#' },
            { type: 'image', src: '/images/app-store.png', alt: 'App Store', href: '#' }
        ]
    }
];
%>
<%- include('partials/footer', { footerMenus }) %>

<%- include('partials/scripts') %>
